"""Interaction Spec agent - Step 1 of the App Factory pipeline."""

from cc_agent import Agent


def create_interaction_spec_prompt(prd_content: str) -> str:
    """Create the prompt for the interaction spec agent.
    
    Args:
        prd_content: The Business PRD content
        
    Returns:
        Formatted prompt for the interaction spec generator
    """
    return f"""
    Transform this Business PRD into a detailed Frontend Interaction Specification.
    
    PRD:
    {prd_content}
    
    Create a comprehensive interaction specification that includes:
    - Complete user flows for EVERY feature mentioned in the PRD
    - All screens and their specific purposes
    - Navigation paths and transitions between screens
    - Detailed user interactions (clicks, inputs, swipes, etc.)
    - Form validations and error states
    - Loading states and progress indicators
    - Success states and confirmations
    - Edge cases and error scenarios
    
    Follow the interaction specification template format.
    Ensure NO features from the PRD are missed.
    Be extremely detailed and specific about each interaction.
    """


INTERACTION_SPEC_AGENT = Agent(
    name="Interaction Spec Generator",
    system_prompt="""You are a frontend interaction specification expert. 
    Transform Business PRDs into detailed interaction specifications.
    
    Your output should include:
    - Complete user flows for every feature
    - All screens and their purposes
    - Navigation paths between screens
    - User interactions (clicks, inputs, gestures)
    - Error states and edge cases
    - Loading states and feedback
    
    Follow the interaction spec template and ensure NO features are missed.""",
    allowed_tools=["Read", "Write"],
    max_turns=3
)