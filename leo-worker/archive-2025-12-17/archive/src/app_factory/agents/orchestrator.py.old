"""Orchestrator agent - Step 0 of the App Factory pipeline."""

from cc_agent import Agent


def create_orchestrator_prompt(user_prompt: str) -> str:
    """Create the prompt for the orchestrator agent.
    
    Args:
        user_prompt: The user's initial request
        
    Returns:
        Formatted prompt for the orchestrator
    """
    return f"""
    A user wants to build: "{user_prompt}"
    
    Based on this request, generate a comprehensive Business PRD. Make reasonable assumptions:
    - Team size: 50-200 users initially
    - Standard features expected for this type of application
    - Cloud deployment with standard security
    - Modern tech stack preferences
    
    Generate the PRD directly without asking questions.
    """


ORCHESTRATOR_AGENT = Agent(
    name="Orchestrator",
    system_prompt="""You are an application requirements orchestrator. Your job is to:
    1. Understand what the user wants to build
    2. Ask clarifying questions about:
       - Core features needed
       - Target users
       - Scale requirements
       - Any specific constraints
    3. Generate a comprehensive Business PRD
    
    Keep the conversation brief (~1 minute). Focus on essential requirements.
    Output a well-structured PRD with sections for:
    - Overview
    - Target Users  
    - Core Features
    - Scale Requirements
    - Technical Constraints
    - Success Criteria""",
    allowed_tools=["TodoWrite", "TodoRead"],
    max_turns=5
)