#!/bin/bash
# Example: Complete Sprint-Based Development Workflow
# This demonstrates the new sprint breakdown approach

set -e  # Exit on error

echo "üöÄ Sprint-Based Development Workflow Example"
echo "=========================================="
echo ""
echo "This example shows how to:"
echo "1. Generate a sprint breakdown from a user prompt"
echo "2. Build Sprint 1 (MVP)"
echo "3. Build Sprint 2 (Enhanced) on top of Sprint 1"
echo ""

# Configuration
APP_NAME="example-app"
PROMPT="Create a task management application with user authentication, task CRUD operations, team collaboration, and reporting dashboard"

echo "üìã Step 1: Generate Sprint Breakdown"
echo "------------------------------------"
echo "This creates a comprehensive sprint plan without building anything"
echo ""
echo "Command:"
echo "uv run python -m app_factory.main_v2 \\"
echo "    --user-prompt \"$PROMPT\" \\"
echo "    --app-name \"$APP_NAME\" \\"
echo "    --skip-questions \\"
echo "    --sprint-breakdown-only"
echo ""
echo "Output: apps/$APP_NAME/specs/sprints_breakdown.md"
echo ""

echo "üì¶ Step 2: Build Sprint 1 (MVP)"
echo "------------------------------"
echo "Build the core functionality defined in Sprint 1"
echo ""
echo "Command:"
echo "uv run python -m app_factory.main_v2 \\"
echo "    --sprint-breakdown apps/$APP_NAME/specs/sprints_breakdown.md \\"
echo "    --sprint 1 \\"
echo "    --app-name \"${APP_NAME}-sprint1\" \\"
echo "    --iterative-stage-1"
echo ""
echo "Output: apps/${APP_NAME}-sprint1/"
echo ""

echo "üöÄ Step 3: Deploy Sprint 1"
echo "-------------------------"
echo "Deploy the MVP to get user feedback"
echo "(Deployment commands would go here)"
echo ""

echo "üì¶ Step 4: Build Sprint 2 (Enhanced)"
echo "-----------------------------------"
echo "Add Sprint 2 features on top of Sprint 1 codebase"
echo ""
echo "Command:"
echo "uv run python -m app_factory.main_v2 \\"
echo "    --sprint-breakdown apps/$APP_NAME/specs/sprints_breakdown.md \\"
echo "    --sprint 2 \\"
echo "    --app-name \"${APP_NAME}-sprint2\" \\"
echo "    --previous-sprint-path apps/${APP_NAME}-sprint1/ \\"
echo "    --iterative-stage-1"
echo ""
echo "Output: apps/${APP_NAME}-sprint2/"
echo ""

echo "üîç Step 5: Verify Sprint 2"
echo "-------------------------"
echo "Ensure Sprint 1 features still work and Sprint 2 features are added"
echo "(Test commands would go here)"
echo ""

echo "üìä Benefits of This Approach:"
echo "----------------------------"
echo "‚úÖ Clear sprint planning before implementation"
echo "‚úÖ MVP delivered quickly (Sprint 1)"
echo "‚úÖ Incremental feature addition"
echo "‚úÖ Each sprint is deployable"
echo "‚úÖ Easy to track progress and costs"
echo "‚úÖ Natural checkpoints for feedback"
echo ""

echo "üí° Tips:"
echo "--------"
echo "- Always generate sprint breakdown first"
echo "- Test thoroughly between sprints"
echo "- Use checkpoints to resume if needed"
echo "- Keep Sprint 1 as minimal as possible"
echo ""

echo "üìù Note: This is an example workflow. Adjust commands as needed for your use case."