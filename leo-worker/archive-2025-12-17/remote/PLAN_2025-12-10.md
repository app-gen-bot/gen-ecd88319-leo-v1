# Leo Remote CLI Plan

**Date**: 2025-12-10 (Updated 2025-12-11)
**Status**: Phase 1 - Container validated, building CLI

## Goal

Create a remote CLI (`leo-remote`) that runs Leo via WSI Protocol. Core modules (Container Manager, WSI Server) will be reused in Leo SaaS.

## Progress

### Completed
- [x] Create `remote/` directory structure
- [x] Set up `leo_container` Python package with WSI Client
- [x] Dockerfile at app-factory root (build context needs full repo)
- [x] Remove mock mode - real Leo only
- [x] Docker build succeeds (`leo-container:1dccc907`)
- [x] Container imports validated (leo_container, app_factory_leonardo_replit)
- [x] Architecture docs and diagrams created

### In Progress
- [ ] Create WSI Server TypeScript module
- [ ] Create CLI entry point

### Pending
- [ ] Test end-to-end autonomous generation

## Structure

```
app-factory/
├── Dockerfile                          # Container image (at root)
├── src/app_factory_leonardo_replit/    # Leo core
├── vendor/                             # cc-agent, cc-tools
├── .claude/                            # Claude skills
└── remote/
    ├── PLAN_2025-12-10.md              # This file
    ├── docs/                           # Architecture docs
    │   ├── README.md                   # Overview + diagrams
    │   ├── leo-remote-architecture.dot/png
    │   ├── leo-saas-architecture.dot/png
    │   └── architecture/               # WSI Protocol spec
    ├── container/
    │   ├── build.sh
    │   ├── requirements.txt
    │   └── leo_container/              # WSI Client package
    └── cli/
        └── src/
            ├── container-manager.ts    # Shared module
            ├── wsi-server.ts           # Shared module (to build)
            └── index.ts                # CLI entry point (to build)
```

## Build Commands

```bash
# Build container
cd /Users/jake/dev/app-factory/remote/container
./build.sh
# Output: leo-container:<commit-hash>
```

## Key Design Decisions

1. **Container is WSI Client** - Connects TO the CLI/SaaS, not the other way around
2. **Real Leo only** - No mock mode in remote CLI
3. **Shared modules** - container-manager.ts and wsi-server.ts reused in Leo SaaS
4. **AWS Secrets** - Container loads tokens from Secrets Manager automatically
