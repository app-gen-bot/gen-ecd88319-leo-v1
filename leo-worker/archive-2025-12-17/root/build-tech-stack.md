# Build Tech Stack Documentation

## Official Tech Stack for Leonardo Pipeline Apps

Based on analysis of the proven Replit architecture, this is our official tech stack for all apps generated by the Leonardo pipeline.

### Frontend Stack

- **Build Tool**: Vite 5.x
  - Ultra-fast development with HMR
  - Optimized production builds
  - TypeScript support out of the box

- **Framework**: React 18
  - Modern hooks and concurrent features
  - Strict mode enabled for better development experience

- **Routing**: Wouter 3.x
  - Lightweight client-side routing
  - No build-time dependencies
  - Simple declarative API

- **State Management**: Tanstack Query (React Query) 5.x
  - Server state management
  - Automatic caching and synchronization
  - Error handling and retry logic

- **UI Components**: ShadCN UI + Radix UI
  - Accessible, customizable components
  - Full component library (50+ components)
  - TypeScript support

- **Styling**: Tailwind CSS 3.x
  - Utility-first CSS framework
  - Responsive design system
  - Custom design tokens

- **Icons**: Lucide React
  - Consistent icon library
  - Tree-shakeable
  - TypeScript support

### Backend Stack

- **Runtime**: Node.js with TypeScript
  - Modern ES modules
  - Full type safety

- **Framework**: Express.js 4.x
  - Minimal, unopinionated web framework
  - Extensive middleware ecosystem
  - Battle-tested in production

- **Database ORM**: Drizzle ORM
  - Type-safe database queries
  - PostgreSQL dialect
  - Migration support

- **Database**: PostgreSQL
  - Robust relational database
  - JSONB support for flexible data
  - Full ACID compliance

- **Validation**: Zod
  - TypeScript-first schema validation
  - Runtime type checking
  - Seamless Drizzle integration

- **Build System**: ESBuild
  - Extremely fast bundling
  - Tree shaking
  - Production optimization

### Development Experience

- **Package Manager**: npm (via package.json)
- **TypeScript Configuration**: Strict mode enabled
- **Hot Module Replacement**: Vite dev server
- **API Development**: Built-in request/response logging
- **Error Handling**: Comprehensive error boundaries and middleware

### Database Schema Integration

- **Schema Location**: `shared/schema.ts`
- **Generated by**: Schema Generator Agent
- **Format**: Drizzle ORM table definitions with Zod validation
- **Type Safety**: Full end-to-end TypeScript types

### Project Structure

```
app/
├── client/                 # Frontend application
│   ├── src/
│   │   ├── components/     # React components
│   │   │   └── ui/         # ShadCN UI components
│   │   ├── hooks/          # Custom React hooks
│   │   ├── lib/            # Utilities and configurations
│   │   ├── pages/          # Route components
│   │   ├── App.tsx         # Main app component
│   │   ├── main.tsx        # Entry point
│   │   └── index.css       # Global styles
│   └── index.html          # HTML template
├── server/                 # Backend application
│   ├── index.ts            # Express server setup
│   ├── routes.ts           # API route definitions
│   ├── storage.ts          # Data access layer
│   └── vite.ts             # Vite integration
├── shared/                 # Shared code
│   └── schema.ts           # Database schema (generated)
├── package.json            # Dependencies and scripts
├── vite.config.ts         # Vite configuration
├── tsconfig.json          # TypeScript configuration
├── tailwind.config.ts     # Tailwind configuration
├── drizzle.config.ts      # Drizzle ORM configuration
└── postcss.config.js      # PostCSS configuration
```

### Build and Development Scripts

```json
{
  "scripts": {
    "dev": "NODE_ENV=development tsx server/index.ts",
    "build": "vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist",
    "start": "NODE_ENV=production node dist/index.js",
    "check": "tsc",
    "db:push": "drizzle-kit push"
  }
}
```

### Key Design Principles

1. **Type Safety First**: Full TypeScript coverage from database to UI
2. **Performance**: Vite for fast development, optimized production builds
3. **Developer Experience**: HMR, comprehensive logging, error handling
4. **Proven Architecture**: Based on successful Replit patterns
5. **Schema-Driven**: Database schema as source of truth for types
6. **Component Reusability**: Comprehensive ShadCN UI component library

### Environment Configuration

- **Development**: In-memory storage, Vite dev server, HMR
- **Production**: PostgreSQL database, static file serving, optimized builds
- **Database URL**: Configured via `DATABASE_URL` environment variable

This tech stack provides a solid foundation for building modern, type-safe, performant web applications through the Leonardo pipeline.