# Leo SaaS Environment Variables
#
# QUICK SETUP:
# 1. cp .env.example .env.local
# 2. Create a Supabase project (or use existing one)
# 3. Get credentials from: Supabase Dashboard → Settings → API
# 4. Fill in all values below (replace YOUR_PROJECT_REF, passwords, keys)
# 5. ./scripts/build-leo.sh   # Build container (uses .env.local)
# 6. ./scripts/run-leo.sh     # Run container
# 7. Open http://localhost:5013/console
#
# IMPORTANT: Always use ./scripts/build-leo.sh to build - it passes VITE_* vars
# as Docker build args. Manual `docker build` will NOT work correctly.

# =============================================================================
# FRONTEND (Vite) - prefix with VITE_ to expose to client
# =============================================================================
# These are baked into the frontend at build time via --build-arg
VITE_SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
VITE_SUPABASE_ANON_KEY=eyJ...your-anon-key

# =============================================================================
# BACKEND - Supabase Auth & Database
# =============================================================================
# Your Supabase project for auth validation
SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
SUPABASE_ANON_KEY=eyJ...your-anon-key
SUPABASE_SERVICE_ROLE_KEY=eyJ...your-service-role-key

# Database connection (transaction mode via pgbouncer - required for Drizzle)
# Get from: Supabase Dashboard → Settings → Database → Connection string → Transaction pooler
DATABASE_URL=postgresql://postgres.YOUR_PROJECT_REF:YOUR_PASSWORD@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true
DATABASE_URL_POOLING=postgresql://postgres.YOUR_PROJECT_REF:YOUR_PASSWORD@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true

# =============================================================================
# CONFIG MODE
# =============================================================================
# Set to 'true' to use local .env instead of AWS Secrets Manager
USE_LOCAL_CONFIG=true

# =============================================================================
# CONTAINER ORCHESTRATION
# =============================================================================
# Docker image for generation containers (legacy name)
CONTAINER_IMAGE=leo-websocket

# Generator image - use leo-container:dev for local development
GENERATOR_IMAGE=leo-container:dev

# Workspace directory for local generation
WORKSPACE_DIR=/tmp/generations

# =============================================================================
# APP GENERATION - SUPABASE PER-APP MODE
# =============================================================================
# Max concurrent generations per user (default: 3)
MAX_CONCURRENT_GENERATIONS_PER_USER=3

# Supabase access token - YOUR token so agent can create projects in YOUR account
# Get from: Supabase Dashboard → Account → Access tokens
# Each developer needs their own token (like CLAUDE_CODE_OAUTH_TOKEN)
SUPABASE_ACCESS_TOKEN=sbp_xxx

# Mode: 'per-app' (agent creates project per app) or 'pooled' (legacy)
SUPABASE_MODE=per-app

# =============================================================================
# LEGACY: POOLED MODE (Deprecated)
# =============================================================================
# Pooled mode is deprecated. Per-app mode is now the default.
# Pool code is kept for potential future use but not recommended.
# If you need pooled mode, set SUPABASE_MODE=pooled and configure:
# SUPABASE_POOL_1_URL=https://project-1.supabase.co
# SUPABASE_POOL_1_ANON_KEY=eyJ...
# SUPABASE_POOL_1_SERVICE_ROLE_KEY=eyJ...
# SUPABASE_POOL_1_DATABASE_URL=postgresql://...

# =============================================================================
# GITHUB INTEGRATION (Optional)
# =============================================================================
# Bot token for creating repos and pushing code
# GITHUB_BOT_TOKEN=ghp_xxx
# USE_GITHUB_INTEGRATION=true

# =============================================================================
# AWS (Production only)
# =============================================================================
# AWS_REGION=us-east-1
# USE_AWS_ORCHESTRATOR=true
# ECS_CLUSTER=leo-cluster
# APP_GENERATOR_TASK_DEF=leo-generator
# TASK_SUBNETS=subnet-xxx
# TASK_SECURITY_GROUP=sg-xxx
# S3_BUCKET=leo-generations

# =============================================================================
# CLAUDE CODE (Required for generation)
# =============================================================================
# CLAUDE_CODE_OAUTH_TOKEN=sk-ant-xxx

# =============================================================================
# FLY.IO DEPLOYMENT (Optional)
# =============================================================================
# FLY_API_TOKEN=fo1_xxx

# =============================================================================
# EMAIL NOTIFICATIONS (Optional)
# =============================================================================
# Set to 'true' to enable email notifications when generations complete/fail
# Uses existing Supabase credentials for user email lookup
# TODO: Integrate with Resend/SendGrid for actual email delivery
# EMAIL_NOTIFICATIONS_ENABLED=true
